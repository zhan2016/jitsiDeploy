/*! callstats.js  version = 3.27.0 2017-12-14 */
function SlidingWindow(a,b){this.items=[],this.plugins=[],this.timeoutInMs=b,this.maxItemsNum=a,this.minItemsNum=0,this.last=null}var SWItem=require("./swItem");SlidingWindow.prototype={constructor:SlidingWindow,signalize:function(a,b){for(var c=0;c<this.plugins.length;++c){var d=this.plugins[c];null!==d.signalize&&void 0!==d.signalize?d.signalize.call(d,a,b):console.warn(d)}},toString:function(){return""}},SlidingWindow.prototype.getLast=function(){return this.last},SlidingWindow.prototype.setMaxItemsNum=function(a){this.maxItemsNum=a},SlidingWindow.prototype.setTimeoutInMs=function(a){this.timeoutInMs=a},SlidingWindow.prototype.setMinItemsNum=function(a){this.minItemsNum=a},SlidingWindow.prototype.refresh=function(){if(!(this.items.length<=this.minItemsNum)){for(;0<this.maxItemsNum&&this.maxItemsNum<=this.items.length;)this.remove();0<this.timeoutInMs&&this.timeoutInMs<this.items[0].getElapsed()&&(this.remove(),this.refresh())}},SlidingWindow.prototype.getItemsNum=function(){return this.items.length},SlidingWindow.prototype.add=function(a){this.refresh(),this.items.push(new SWItem(a));for(var b=0;b<this.plugins.length;b++){var c=this.plugins[b];c.add(a)}this.last=a},SlidingWindow.prototype.map=function(a){for(var b=0;b<this.plugins.length;b++){var c=this.plugins[b];c.map(a)}},SlidingWindow.prototype.remove=function(){for(var a=this.items.shift(),b=0;b<this.plugins.length;b++){var c=this.plugins[b];c.remove(a.value)}},SlidingWindow.prototype.foreach=function(a,b){var c=this.items;void 0!==b&&(c=b(c));for(var d=0;d<c.length;d++){var e=c[d];a(e.value)}},SlidingWindow.prototype.addPlugin=function(a){this.plugins.push(a)},module.exports=SlidingWindow;