/*! callstats.js  version = 3.27.0 2017-12-14 */
function SWSortPercentile(a,b,c){SWPlugin.call(this),this.items=[],this.comparator=a,this.percentile=b,this.meanCalcer="undefined"==typeof c?function(a,b){return(a+b)/2}:c}var SWPercentileNotification=require("./swPercentileNotification"),SWPlugin=require("./swPlugin");SWSortPercentile.prototype=Object.create(SWPlugin.prototype),SWSortPercentile.prototype.constructor=SWSortPercentile,SWSortPercentile.prototype.add=function(a){this.items.push(a),this.calculate()},SWSortPercentile.prototype.remove=function(){this.items.shift(),this.calculate()},SWSortPercentile.prototype.calculate=function(){if(null!==this.notifyCb){var a,b=new SWPercentileNotification,c=this.items.slice();if(a=c.length,!(a<1)){if(c.sort(this.comparator),b.tracked=a,b.min=c[0],b.max=c[c.length-1],a<3)return b.estimated=!0,this.percentile<50?b.actual=b.min:50<this.percentile?b.actual=b.max:b.actual=this.meanCalcer(b.min,b.max),void this.notify(b);var d=this.percentile/100*c.length;Number.isInteger(d)===!1?(d=Math.ceil(d),b.actual=c[d-1]):b.actual=this.meanCalcer(c[d-1],c[d]),this.notify(b)}}},module.export=SWSortPercentile;